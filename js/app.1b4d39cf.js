(function(t){function e(e){for(var a,n,o=e[0],c=e[1],l=e[2],g=0,d=[];g<o.length;g++)n=o[g],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);h&&h(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={app:0},r=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var h=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"01b4":function(t,e,s){t.exports=s.p+"img/flower_leaf_24.fd465478.png"},"022c":function(t,e,s){},"0528":function(t,e,s){t.exports=s.p+"img/red.a435720b.png"},"0989":function(t,e,s){t.exports=s.p+"img/flower_leaf_23.70b44d35.png"},"0bce":function(t,e,s){},"0bdc":function(t,e,s){t.exports=s.p+"img/flower_leaf_8.c81bb7a9.png"},"0f64":function(t,e,s){"use strict";s("7e6e")},1:function(t,e){},"106e":function(t,e,s){t.exports=s.p+"img/flower_leaf_9.2d4ef25c.png"},"11f7":function(t,e,s){t.exports=s.p+"img/flower_leaf_14.5909f958.png"},1526:function(t,e,s){t.exports=s.p+"img/flower_leaf_17.5b9f3431.png"},"15e8":function(t,e,s){t.exports=s.p+"img/flower_leaf_34.2e20d34d.png"},"1ad0":function(t,e,s){t.exports=s.p+"img/cute_handdrawn_1.4e45d5a7.png"},"1b02":function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_1.43b6cfb9.png"},"1f6a":function(t,e,s){t.exports=s.p+"img/2_2.e7244bab.png"},2:function(t,e){},"229b":function(t,e,s){t.exports=s.p+"img/flower_leaf_1.4169c80b.png"},"245d":function(t,e,s){t.exports=s.p+"img/flower_leaf_12.b827c0cc.png"},"24d1":function(t,e,s){},2551:function(t,e,s){t.exports=s.p+"img/2-2_snow.9578af6d.png"},"265c":function(t,e,s){},"284c":function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_12.58609bfc.png"},2881:function(t,e,s){t.exports=s.p+"img/flower_leaf_29.85257567.png"},3:function(t,e){},"37d4":function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_5.a5c3338c.png"},"37da":function(t,e,s){"use strict";s("9ce4")},"3c9b":function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_11.14a9e7f7.png"},"3cb6":function(t,e,s){t.exports=s.p+"img/flower_leaf_7.ce6e885c.png"},"3d77":function(t,e,s){t.exports=s.p+"img/jesus.5c7b011d.png"},"424e":function(t,e,s){"use strict";s("aa0b")},"42b6":function(t,e,s){t.exports=s.p+"img/flower_leaf_22.396cb704.png"},"47a8":function(t,e,s){},4866:function(t,e,s){t.exports=s.p+"img/flower_leaf_13.48943735.png"},"487d":function(t,e,s){},"487f":function(t,e,s){t.exports=s.p+"img/flower_leaf_10.c1549465.png"},"491e":function(t,e,s){},"4fbd":function(t,e,s){t.exports=s.p+"img/filter-sample.335832e6.jpg"},"502b":function(t,e,s){t.exports=s.p+"img/flower_leaf_2.7d060d67.png"},"558a":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},r=[];const n=[{vmid:"description",name:"description",content:"무제한으로 원하는 모습을 찍고 꾸미세요! 무료 폴라로이드 촬영 페이지, Pick The Moment"},{vmid:"keywords",name:"keywords",content:"폴라로이드, 스티커사진"},{vmid:"author",name:"author",content:"dnfwlxo11"}];var o={metaInfo:{title:"Pick The Moment",meta:n}},c=o,l=(s("6cad"),s("2877")),h=Object(l["a"])(c,i,r,!1,null,null,null),g=h.exports,d=s("8c4f"),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home h-100"},[e("div",{staticClass:"container h-100"},[e("main-page",{staticClass:"h-100"})],1)])},m=[],f=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-page"},[e("div",{staticClass:"content-container"},[t._m(0),e("div",{staticClass:"start-button-container"},[e("button",{staticClass:"start-btn",on:{click:function(e){t.init(),t.$router.push("/pickMem")}}},[t._v(" 시작하기 ")])])])])}),p=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title-container"},[e("h1",{staticClass:"main-title"},[t._v("살레네컷")]),e("p",{staticClass:"subtitle"},[t._v("무제한으로 원하는 모습을 찍고 꾸미세요!")])])}],v={name:"MainPage",mounted(){this.init()},methods:{init(){this.$store.commit("resetState")}}},w=v,C=(s("b372"),Object(l["a"])(w,f,p,!1,null,"7c07225b",null)),b=C.exports,_={name:"Home",components:{mainPage:b}},y=_,k=(s("bb6f"),Object(l["a"])(y,u,m,!1,null,null,null)),I=k.exports,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pick-mem h-100"},[e("div",{staticClass:"content",staticStyle:{"overflow-y":"auto"}},[t.step>3?e("nav-bar",{staticClass:"nav",attrs:{msg:t.msg[t.step],step:t.step},on:{"on-next":t.nextStep,"on-previous":t.previousStep}}):t._e(),e("div",{staticClass:"body container"},[0==t.step?e("step-one",{staticClass:"step-0",on:{"frame-selected":t.nextStep,"character-selection-needed":t.goToCharacterSelection}}):.5==t.step?e("step-one-point-five",{staticClass:"step-0-5",on:{"characters-selected":t.goToPhotoStep}}):1==t.step?e("step-two",{staticClass:"step-1",on:{"photos-complete":t.nextStep}}):2==t.step?e("step-three",{staticClass:"step-2",on:{"photos-selected":t.nextStep}}):3==t.step?e("step-four",{staticClass:"step-3",on:{"on-previous":t.previousStep}}):4==t.step?e("step-five",{staticClass:"step-4"}):e("step-result",{staticClass:"step-5",on:{"on-previous":t.previousStep}})],1)],1),t.step>3?e("footer-bar",{staticClass:"footer"}):t._e()],1)},F=[],T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav"},[e("div",{staticClass:"text-center mt-auto mb-auto w-100"},[e("div",{staticClass:"row m-0 p-0"},[e("div",{staticClass:"col-2 m-auto"},[e("div",{staticClass:"step-btn",on:{click:function(e){return t.$emit("on-previous")}}},[e("i",{staticClass:"mdi mdi-chevron-left"}),e("strong",[t._v("이전")])])]),e("div",{staticClass:"col-8"},[e("div",{staticClass:"title"},[e("strong",[t._v(t._s(t.msg))])])]),5!=t.step?e("div",{staticClass:"col-2 m-auto"},[e("div",{staticClass:"step-btn",on:{click:function(e){return t.$emit("on-next")}}},[e("strong",[t._v("다음")]),e("i",{staticClass:"mdi mdi-chevron-right"})])]):t._e(),e("div",{staticClass:"col-2 m-auto"})])])])},S=[],$={name:"Nav",props:{msg:{type:String,default:"Pick the Momory"},step:{type:Number,default:!1}}},A=$,O=(s("424e"),Object(l["a"])(A,T,S,!1,null,"b3984a92",null)),j=O.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div",{staticClass:"title d-flex justify-content-center h-100"},[e("div",{staticClass:"row m-0 p-0 w-100 m-auto text-center"},[t._m(0),e("div",{staticClass:"col-4"},[e("strong",{staticClass:"m-auto"},[t._v(t._s(t.msg))])]),t._m(1)])])])},B=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4"},[e("a",{attrs:{href:"https://github.com/dnfwlxo11"}},[t._v("제작자 Github 바로가기")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4"},[e("a",{attrs:{href:"https://github.com/dnfwlxo11/pickMem"}},[t._v("잘했다고 칭찬하러가기")])])}],P={name:"Footer",props:{msg:{type:String,default:"안녕하세요."}}},M=P,N=(s("a7ab"),Object(l["a"])(M,L,B,!1,null,"3223f68e",null)),R=N.exports,E=function(){var t=this,e=t._self._c;return e("StepLayout",{attrs:{title:"사진 촬영 프레임 선택"}},[e("div",{staticClass:"frame-options-wrapper"},[e("div",{staticClass:"frame-option",class:{selected:"1x4"==t.targetFrame},on:{click:function(e){return t.selectFrame("1x4")}}},[e("img",{staticClass:"frame-preview",attrs:{src:s("cb6b"),alt:"세로 4컷 프레임",draggable:"false"}})]),e("div",{staticClass:"or-divider"},[t._v("OR")]),e("div",{staticClass:"frame-option",class:{selected:"2x2"==t.targetFrame},on:{click:function(e){return t.selectFrame("2x2")}}},[e("img",{staticClass:"frame-preview frame-preview-large",attrs:{src:s("1f6a"),alt:"2x2 그리드 프레임",draggable:"false"}})])])])},D=[],W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step-layout"},[e("h1",{staticClass:"page-title"},[t._v("살레네컷")]),e("div",{staticClass:"content-container"},[t.showTitle?e("div",{staticClass:"title-container"},[e("h2",{staticClass:"section-title"},[t._v(t._s(t.title))]),t.instruction?e("p",{staticClass:"instruction-text"},[t._v(t._s(t.instruction))]):t._e()]):t._e(),t._t("default")],2)])},U=[],Y={name:"StepLayout",props:{title:{type:String,default:""},instruction:{type:String,default:""},showTitle:{type:Boolean,default:!0}}},z=Y,J=(s("f89e"),Object(l["a"])(z,W,U,!1,null,"d7862b5a",null)),X=J.exports,Q={name:"StepOne",components:{StepLayout:X},data(){return{targetFrame:null}},mounted(){this.init(),this.targetFrame=this.$store.getters.getFrame,this.targetFrame?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1)},beforeDestroy(){this.nextStep()},methods:{selectFrame(t){this.targetFrame=t,this.$store.commit("setNext",!0),this.$store.commit("setTable",{columns:parseInt(t.split("x")[0]),rows:parseInt(t.split("x")[1])}),this.$store.commit("setFrame",t),this.$nextTick(()=>{"2x2"===t?this.$emit("character-selection-needed"):this.$emit("frame-selected")})},nextStep(){this.targetFrame&&this.$store.commit("setFrame",this.targetFrame)},init(){this.$store.commit("resetState")}}},H=Q,K=(s("37da"),Object(l["a"])(H,E,D,!1,null,"7707ccf4",null)),q=K.exports,V=function(){var t=this,e=t._self._c;return e("StepLayout",{attrs:{title:"인물 선택"}},[e("div",{staticClass:"character-options-wrapper"},[e("div",{staticClass:"character-option",class:{selected:t.selectedCharacters.includes("bosco")},on:{click:function(e){return t.toggleCharacter("bosco")}}},[e("img",{staticClass:"character-preview",attrs:{src:s("fe76"),alt:"보스코",draggable:"false"}}),e("span",{staticClass:"character-label"},[t._v("보스코")])]),e("div",{staticClass:"or-divider"},[t._v("OR")]),e("div",{staticClass:"character-option",class:{selected:t.selectedCharacters.includes("jesus")},on:{click:function(e){return t.toggleCharacter("jesus")}}},[e("img",{staticClass:"character-preview",attrs:{src:s("3d77"),alt:"예수",draggable:"false"}}),e("span",{staticClass:"character-label"},[t._v("예수")])]),e("div",{staticClass:"or-divider"},[t._v("OR")]),e("div",{staticClass:"character-option",class:{selected:t.selectedCharacters.includes("none")},on:{click:function(e){return t.toggleCharacter("none")}}},[e("div",{staticClass:"character-preview no-character"},[e("span",{staticClass:"no-character-text"},[t._v("인물 없음")])]),e("span",{staticClass:"character-label"},[t._v("인물 없음")])])]),e("div",{staticClass:"selected-info",class:{complete:1===t.selectedCharacters.length}})])},G=[],Z={name:"StepOnePointFive",components:{StepLayout:X},data(){return{selectedCharacters:[]}},mounted(){const t=this.$store.getters.getSelectedCharacter;t&&(this.selectedCharacters=[t])},watch:{selectedCharacters:{handler(t){1===t.length&&this.$nextTick(()=>{this.$emit("characters-selected")})},immediate:!1}},methods:{toggleCharacter(t){if(this.selectedCharacters.includes(t))this.selectedCharacters=[],this.$store.commit("setSelectedCharacter",null);else{this.selectedCharacters=[t];const e="none"===t?null:t;this.$store.commit("setSelectedCharacter",e)}}}},tt=Z,et=(s("678e"),Object(l["a"])(tt,V,G,!1,null,"5412241f",null)),st=et.exports,at=function(){var t=this,e=t._self._c;return e("StepLayout",{attrs:{title:"사진 촬영","show-title":!1}},[t.isLoading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"text-center"},[e("div",[e("i",{staticClass:"mdi mdi-loading mdi-spin",staticStyle:{"font-size":"40px"}})]),e("small",[t._v("카메라 설정 중")])])]):!t.isLoading&&t.canPhoto?e("div",{staticClass:"camera-container"},[e("div",{staticClass:"title-container"},[e("h2",{staticClass:"section-title"},[t._v("사진 촬영")])]),e("div",{staticClass:"phone-frame"},[e("div",{staticClass:"phone-notch"}),e("div",{staticClass:"camera-content"},[e("video",{directives:[{name:"show",rawName:"v-show",value:!t.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"camera",class:{"camera-mirror":t.isMirrored,"camera-22-frame":t.is22Frame},attrs:{autoplay:""}}),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvas",class:{"camera-22-frame":t.is22Frame}}),t.overlayImageSrc&&!t.isPhotoTaken?e("img",{staticClass:"character-overlay",attrs:{src:t.overlayImageSrc,alt:"Character overlay"}}):t._e(),t.isCountdown&&!t.isPaused?e("div",{staticClass:"countdown-overlay"},[e("div",{staticClass:"countdown-number"},[t._v(t._s(t.countdown))]),e("button",{staticClass:"btn btn-instant",on:{click:t.instantCapture}},[t._v("즉시 촬영")])]):t._e()])]),e("div",{staticClass:"control-buttons"},[e("button",{staticClass:"btn btn-photo",on:{click:t.handlePhotoClick}},[t._v(" 사진촬영 ")]),e("button",{staticClass:"btn btn-mirror",on:{click:t.toggleMirror}},[t._v(" 좌우반전 ")]),e("button",{staticClass:"btn btn-switch",on:{click:t.switchCamera}},[t._v(" 카메라 전환 ")]),e("button",{staticClass:"btn btn-restart",on:{click:t.togglePause}},[t._v(" "+t._s(t.isPaused?"다시시작":"일시정지")+" ")])]),e("div",{staticClass:"photo-counter"},[t._v(" 사진 "+t._s(t.getImageLen)+"/8 ")]),t.getImageLen>0?e("div",{staticClass:"photo-gallery"},t._l(Object.values(t.images),(function(t,s){return e("div",{key:s,staticClass:"photo-thumbnail"},[e("img",{attrs:{src:t,alt:"촬영된 사진"}})])})),0):t._e()]):e("div",{staticClass:"camera-error"},[e("div",{staticClass:"text-center"},[e("i",{staticClass:"mdi mdi-camera-off",staticStyle:{"font-size":"60px",color:"#999"}}),e("p",{staticStyle:{"font-size":"18px",color:"#666","margin-top":"20px"}},[t._v("카메라에 접근할 수 없습니다.")]),e("p",{staticStyle:{"font-size":"14px",color:"#999"}},[t._v("브라우저에서 카메라 권한을 허용해주세요.")])])]),t.isOpen?e("modal",{attrs:{title:"사진 삭제",msg:"찍은 사진들을 모두 초기화 하시겠어요?"},on:{"on-close":function(e){t.isOpen=!1},"on-submit":function(e){t.isOpen=!1,t.initImage()}}}):t._e()],1)},it=[],rt=(s("e9f5"),s("7d54"),function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header",staticStyle:{"border-bottom":"1px solid lightgrey"}},[e("div",{staticClass:"row w-100 m-0 p-0"},[e("div",{staticClass:"col-2"}),e("div",{staticClass:"col-8 d-flex justify-content-center align-items-center"},[e("strong",[t._v(t._s(t.title))])]),e("div",{staticClass:"col-2 text-right"},[e("a",{staticClass:"btn btn-sm",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("on-close")}}},[e("i",{staticClass:"mdi mdi-close"})])])])]),e("div",{staticClass:"modal-body d-flex justify-content-center align-items-center"},[t._v(" "+t._s(t.msg)+" ")]),e("div",{staticClass:"modal-footer d-block"},[e("div",{staticClass:"row w-100 m-0 p-0"},[e("button",{staticClass:"btn btn-sm btn-block text-secondary col-6",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-close")}}},[e("i",{staticClass:"mdi mdi-close"}),t._v(" 취소 ")]),e("button",{staticClass:"btn btn-sm btn-block text-success col-6",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-submit")}}},[e("i",{staticClass:"mdi mdi-check"}),t._v(" 확인 ")])])])])])])])}),nt=[],ot={name:"modal",props:{title:{default:"작업 확인 창",type:String},msg:{default:"정말 진행하시겠습니까?",type:String}}},ct=ot,lt=(s("82a1"),Object(l["a"])(ct,rt,nt,!1,null,"339a3348",null)),ht=lt.exports,gt=s("8cf6"),dt=s.n(gt),ut=s("e9d7"),mt=s.n(ut),ft=s("9209"),pt=s.n(ft),vt=s("fa8f"),wt=s.n(vt),Ct={name:"StepTwo",components:{Modal:ht,StepLayout:X},data(){return{images:{},rows:2,columns:1,canPhoto:!1,isOpen:!1,isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,isTarget:null,isMirrored:!0,facingMode:"user",stream:null,isCountdown:!1,countdown:5,countdownInterval:null,isPaused:!1,currentPhotoIndex:0,overlayImageSrc:null,jesusOverlay1:dt.a,jesusOverlay2:mt.a,boscoOverlay1:pt.a,boscoOverlay2:wt.a}},created(){},mounted(){let t=this.$store.getters.getFrame;t&&(this.rows=t.split("x")[0],this.columns=t.split("x")[1]),this.images=this.$store.getters.getImages,this.currentPhotoIndex=this.getImageLen+1,this.updateOverlayImage(),this.getImageLen>=8||this.getImageLen>=6?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1),this.createCameraElement()},beforeDestroy(){},methods:{createCameraElement(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("카메라 API를 사용할 수 없습니다."),this.isLoading=!1,void(this.canPhoto=!1);this.isLoading=!0,this.canPhoto=!1;const t={audio:!1,video:{facingMode:this.facingMode,width:{ideal:1920,min:1280},height:{ideal:1080,min:720}}};navigator.mediaDevices.getUserMedia(t).then(t=>{this.stream=t,this.canPhoto=!0,this.isLoading=!1,this.$nextTick(()=>{this.$refs.camera&&(this.$refs.camera.srcObject=t)})}).catch(t=>{console.error("카메라 접근 오류:",t),this.isLoading=!1,this.canPhoto=!1})},switchCamera(){this.stream&&this.stream.getTracks().forEach(t=>t.stop()),this.facingMode="user"===this.facingMode?"environment":"user",this.createCameraElement()},toggleMirror(){this.isMirrored=!this.isMirrored},handlePhotoClick(){this.isPhotoTaken?(this.saveImage(),this.isPhotoTaken=!1):this.startCountdown()},startCountdown(){this.isCountdown&&!this.isPaused||(this.isPaused&&(this.isPaused=!1),this.isCountdown=!0,this.countdown=5,this.countdownInterval=setInterval(()=>{if(this.isPaused)return clearInterval(this.countdownInterval),void(this.countdownInterval=null);this.countdown--,this.countdown<=0&&(this.stopCountdown(),this.takePhoto())},1e3))},stopCountdown(){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),this.isCountdown=!1,this.countdown=5},instantCapture(){this.stopCountdown(),this.takePhoto()},togglePause(){this.isPaused?(this.isPaused=!1,this.isCountdown&&(this.countdownInterval||this.startCountdown())):(this.isPaused=!0,this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null))},stopCameraStream(){this.stream&&this.stream.getTracks().forEach(t=>{t.stop()})},async takePhoto(){if(this.isPhotoTaken)return;this.isPhotoTaken=!0;const t=this.$refs.canvas.getContext("2d"),e=this.$refs.canvas,s=this.$refs.camera;if(this.is22Frame){s.videoWidth,s.videoHeight;const a=272/230,i=s.videoHeight*a,r=(s.videoWidth-i)/2;e.width=i,e.height=s.videoHeight,t.save(),t.scale(-1,1),t.drawImage(s,r,0,i,s.videoHeight,-e.width,0,e.width,e.height),t.restore()}else e.width=s.videoWidth,e.height=s.videoHeight,t.save(),t.scale(-1,1),t.drawImage(s,-e.width,0,e.width,e.height),t.restore();this.overlayImageSrc&&await new Promise((s,a)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{try{t.drawImage(i,0,0,e.width,e.height)}catch(a){console.error("오버레이 이미지 그리기 오류:",a)}s()},i.onerror=t=>{console.error("오버레이 이미지 로드 실패:",t),s()},i.src=this.overlayImageSrc}),this.$nextTick(()=>{this.saveImage(),this.isPhotoTaken=!1,this.$nextTick(()=>{this.currentPhotoIndex=this.getImageLen+1,this.updateOverlayImage(),this.getImageLen<8?setTimeout(()=>{this.startCountdown()},500):setTimeout(()=>{this.$emit("photos-complete")},1e3)})})},saveImage(){const t=this.$refs.canvas.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");let e=(new Date).getTime();this.$set(this.images,e,t)},showingImage(){this.$store.commit("setImages",this.images)},initImage(){this.$store.commit("setNext",!1),this.$store.commit("setImages",{}),this.$store.commit("setTargets",{}),this.$store.commit("setImgCanvas",{}),this.$store.commit("setTmpTargets",{}),this.$store.commit("setUpdateQueue",[]),this.images={}},removeImg(t){this.images[t]=null,this.$delete(this.images,t),this.$store.commit("setImages",this.images)},updateOverlayImage(){if(!this.is22Frame)return void(this.overlayImageSrc=null);const t=this.$store.getters.getSelectedCharacter;t&&"none"!==t?1===this.currentPhotoIndex||5===this.currentPhotoIndex?this.overlayImageSrc="jesus"===t?this.jesusOverlay1:this.boscoOverlay1:3===this.currentPhotoIndex||7===this.currentPhotoIndex?this.overlayImageSrc="jesus"===t?this.jesusOverlay2:this.boscoOverlay2:this.overlayImageSrc=null:this.overlayImageSrc=null}},computed:{getImageLen(){return Object.keys(this.images).length},is22Frame(){return 2===parseInt(this.rows)&&2===parseInt(this.columns)}},watch:{images:{deep:!0,handler(){this.getImageLen>=8||this.getImageLen>=6?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1),this.showingImage()}}},beforeDestroy(){this.stopCameraStream(),this.stopCountdown()}},bt=Ct,_t=(s("6d6a"),Object(l["a"])(bt,at,it,!1,null,"5fd4a90e",null)),yt=_t.exports,kt=function(){var t=this,e=t._self._c;return e("StepLayout",{attrs:{title:"사진 선택",instruction:`순서대로 ${t.rows*t.columns}장의 사진을 선택하세요`}},[e("div",{staticClass:"photo-grid"},t._l(Object.keys(t.images),(function(s,a){return e("div",{key:a,staticClass:"photo-item",class:{selected:Object.values(t.getSelectList).includes(s)},on:{click:function(e){return t.selectToClick(t.getSelectTargetLen,s,t.images[s])}}},[e("img",{attrs:{src:t.images[s],alt:"사진",draggable:"false"}}),Object.values(t.getSelectList).includes(s)?e("div",{staticClass:"selection-badge"},[t._v(" "+t._s(t.getSelectionNumber(s))+" ")]):t._e()])})),0)])},It=[],xt=(s("910d"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"basic-frame"},[e("div",{class:`outter-frame outter-frame-${t.columns}-${t.rows}`},t._l(t.rowCnt,(function(s,a){return e("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(s,i){return e("div",{key:i,class:`pl-0 pr-0 inner-frame inner-frame-${t.columns}-${t.rows}`},[t.images[a*t.colCnt.length+s]?e("div",{class:`inner-frame-${t.columns}-${t.rows}`},[e("img",{attrs:{src:t.images[a*t.colCnt.length+s],id:"canvas-"+(a*t.colCnt.length+s),draggable:"false"}}),e("div",{staticClass:"overlay",on:{click:function(e){return t.removeImg(a*t.colCnt.length+s)}}},[e("i",{staticClass:"mdi mdi-close-circle"})])]):e("div",{class:`inner-frame-${t.columns}-${t.rows}`},[e("div",{staticClass:"h-100 w-100 d-flex justify-content-center align-items-center"},[e("div",{staticClass:"order-badge d-flex justify-content-center align-items-center"},[t._v(" "+t._s(t.orderArray.indexOf(a*t.colCnt.length+s)+1+t.getImageLen)+" ")])])])])})),0)})),0)])}),Ft=[],Tt={name:"basicFrame",props:{rows:{default:2,type:Number},columns:{default:1,type:Number}},data(){return{rowCnt:[],colCnt:[],images:{},orderArray:null}},created(){},mounted(){this.images=this.$store.getters.getTargets,this.rowCnt=Array.from({length:this.$props.rows},(t,e)=>e+1),this.colCnt=Array.from({length:this.$props.columns},(t,e)=>e+1),this.orderArray=this.$store.getters.getRemoveQueues},methods:{removeImg(t){console.log(t,"basicFrame"),this.$delete(this.images,t),this.$store.commit("setTargets",this.images),this.$store.commit("setTmpTargets",this.images),this.$store.commit("setRemoveQueue",t),this.$store.commit("setTargetListRemove",t),this.images=this.$store.getters.getTargets,Object.keys(this.$store.getters.getTargets).length!=this.rows*this.columns&&this.$store.commit("setNext",!1)}},computed:{getImageLen(){return Object.keys(this.images).length}}},St=Tt,$t=(s("7e6c"),Object(l["a"])(St,xt,Ft,!1,null,"03b9359c",null)),At=$t.exports,Ot={name:"StepThree",components:{basicFrame:At,StepLayout:X},data(){return{rows:2,columns:1,width:500,images:{},selectTarget:{},selectList:{},frame:null,queue:[]}},created(){},mounted(){let t=this.$store.getters.getFrame;this.rows=t.split("x")[0],this.columns=t.split("x")[1],this.selectTarget=this.$store.getters.getTargets,this.selectList=this.$store.getters.getTargetList,this.images=this.$store.getters.getImages,this.frame=this.$store.getters.getFrame,this.queue=Array.from({length:this.rows*this.columns},(t,e)=>{if(!this.selectTarget[e+1])return e+1}),this.queue=this.queue.filter(t=>t),this.$store.commit("setUpdateQueue",this.queue),Object.keys(this.$store.getters.getTargets).length==this.rows*this.columns?this.$store.commit("setNext",!0):this.$store.commit("setNext",!1)},destroyed(){},methods:{selectToClick(t,e,s){if(this.selectTarget=this.$store.getters.getTargets,this.selectList=this.$store.getters.getTargetList,Object.values(this.getSelectList).includes(e)){for(let t in this.selectList)if(this.selectList[t]===e){const e=parseInt(t);this.$delete(this.selectTarget,e),this.$delete(this.selectList,t),this.queue=this.$store.getters.getRemoveQueues,this.queue.push(e),this.queue.sort((t,e)=>t-e),this.$store.commit("setUpdateQueue",this.queue),this.$store.commit("setTargets",this.selectTarget),this.$store.commit("setTmpTargets",this.selectTarget),this.$store.commit("setTargetList",this.selectList);break}return this.selectTarget=this.$store.getters.getTargets,void this.$store.commit("setNext",!1)}let a=this.frame.split("x");const i=parseInt(a[0])*parseInt(a[1]);if(Object.keys(this.selectTarget).length>=i)this.$Utils.toast("이미 모두 골랐어요.");else{{this.queue=this.$store.getters.getRemoveQueues,this.$set(this.selectList,t+1,e);let a=this.queue.shift();this.$store.commit("setUpdateQueue",this.queue),this.$store.commit("setTarget",[a,s]),this.$store.commit("setTmpTarget",[a,s]),this.$store.commit("setTargetList",this.selectList),this.selectTarget=this.$store.getters.getTargets}Object.keys(this.$store.getters.getTargets).length==this.rows*this.columns?(this.$store.commit("setNext",!0),setTimeout(()=>{this.$emit("photos-selected")},500)):this.$store.commit("setNext",!1)}},getSelectionNumber(t){const e=this.getSelectList;for(let s in e)if(e[s]===t)return parseInt(s);return null}},computed:{getSelectList(){return this.selectList},getSelectTargetLen(){return Object.keys(this.selectTarget).length}}},jt=Ot,Lt=(s("d53a"),Object(l["a"])(jt,kt,It,!1,null,"774d5241",null)),Bt=Lt.exports,Pt=function(){var t=this,e=t._self._c;return e("StepLayout",{attrs:{title:"장식하기",instruction:"배경색, 패턴, 스티커로 사진을 꾸며보세요"}},[e("div",{staticClass:"main-content"},[e("div",{staticClass:"canvas-section"},[e("div",{ref:"canvasWrapper",staticClass:"canvas-wrapper"},[e("div",{ref:"pic",class:`outter-frame-${parseInt(t.frame.split("x")[0])}-${parseInt(t.frame.split("x")[1])}`,staticStyle:{position:"absolute",padding:"20px","padding-right":"0px"}},t._l(t.rowCnt,(function(s,a){return e("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(s,i){return e("div",{key:i,class:`pl-0 pr-0 inner-frame inner-frame-${t.columns}-${t.rows}`},[e("img",{attrs:{src:t.images[a*t.colCnt.length+s],id:"canvas-"+(a*t.colCnt.length+s),draggable:"false"}})])})),0)})),0),e("div",{ref:"deco",staticStyle:{position:"absolute"}},[t.frame?e("canvas",{ref:"canvas",class:`outter-frame outter-frame-${parseInt(t.frame.split("x")[0])}-${parseInt(t.frame.split("x")[1])}`}):t._e()])])]),e("div",{staticClass:"sidebar-section"},[e("div",{staticClass:"frame-section"},[e("h3",{staticClass:"frame-title"},[t._v("프레임 선택")]),e("div",{staticClass:"frame-options"},[e("div",{staticClass:"frame-option-item",class:{selected:"default"===t.frameType},on:{click:function(e){return t.selectFrameType("default")}}},[e("div",{staticClass:"frame-option-preview default-frame"}),e("span",{staticClass:"frame-option-label"},[t._v("기본 프레임")])]),e("div",{staticClass:"frame-option-item",class:{selected:"snow"===t.frameType},on:{click:function(e){return t.selectFrameType("snow")}}},[e("div",{staticClass:"frame-option-preview snow-frame"},[e("img",{attrs:{src:t.getSnowImage(),alt:"Snow background"}})]),e("span",{staticClass:"frame-option-label"},[t._v("눈 배경")])]),e("div",{staticClass:"frame-option-item",class:{selected:"red"===t.frameType},on:{click:function(e){return t.selectFrameType("red")}}},[e("div",{staticClass:"frame-option-preview red-frame"},[e("img",{attrs:{src:t.getRedImage(),alt:"Red background"}})]),e("span",{staticClass:"frame-option-label"},[t._v("빨간 배경")])])])]),e("div",{staticClass:"message-section"},[e("h3",{staticClass:"message-title"},[t._v("메시지 추가")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.messageText,expression:"messageText"}],staticClass:"message-input",attrs:{type:"text",placeholder:"우린 살레시안"},domProps:{value:t.messageText},on:{input:function(e){e.target.composing||(t.messageText=e.target.value)}}}),e("button",{staticClass:"apply-btn",on:{click:t.addMessage}},[t._v("적용")])]),"default"===t.frameType?e("div",{staticClass:"sidebar-content"},t._l(t.bg,(function(s,a){return e("div",{key:a},[e("div",{staticClass:"color-grid"},t._l(s,(function(s,a){return e("div",{key:a,staticClass:"color-item",class:{selected:t.targetColor==s},on:{click:function(e){return t.selectBg(s)}}},[e("div",{staticClass:"bg",style:{"background-color":s}})])})),0)])})),0):t._e(),e("div",{staticClass:"save-section"},[e("button",{staticClass:"save-btn",on:{click:t.saveImage}},[t._v("저장하기")]),e("button",{staticClass:"home-btn",on:{click:t.goHome}},[t._v("처음으로")])])])])])},Mt=[],Nt=(s("e9c4"),s("88a7"),s("271a"),s("5494"),s("7a94")),Rt=s("c0e9"),Et=s.n(Rt),Dt=s("b926"),Wt=s.n(Dt),Ut=s("0528"),Yt=s.n(Ut),zt=s("2551"),Jt=s.n(zt),Xt=s("ca43"),Qt=s.n(Xt),Ht={name:"stepFour",components:{StepLayout:X},data(){return{rows:2,columns:1,rowCnt:[],colCnt:[],images:{},targetColor:"#00ff0000",targetPattern:null,frame:null,frameType:"default",useSnowBackground:!1,snowImage:Wt.a,redImage:Yt.a,snowImage22:Jt.a,redImage22:Qt.a,canvasHeight:null,canvasWidth:null,canvas:null,contentHeight:500,messageText:"",fontSize:24,pattern:{basic:[]},bg:{simple:["#F2F2F3","#A6A6A6","#595959","#262626","#0D0D0D"],astro:["#F25E7A","#4A2B8C","#5155A6","#05F2DB","#F2E963"],cartoon:["#636AF2","#41A0F2","#A2DCF2","#04D98B","#F2E205"]}}},created(){this.frame=this.$store.getters.getFrame},mounted(){this.init()},beforeDestroy(){this.saveWork()},methods:{async init(){let t=this.$store.getters.getTable;this.images=this.$store.getters.getTargets,this.rows=t.rows,this.columns=t.columns,this.rowCnt=Array.from({length:t.rows},(t,e)=>e+1),this.colCnt=Array.from({length:t.columns},(t,e)=>e+1),this.pattern.basic=Array.from({length:9},(t,e)=>e+1),await this.$nextTick(),2===this.columns&&2===this.rows?(this.canvasHeight=620,this.canvasWidth=620):(this.canvasHeight=this.$refs.canvas.clientHeight,this.canvasWidth=this.$refs.canvas.clientWidth),this.canvas=new Nt["fabric"].Canvas(this.$refs.canvas),this.canvas.setHeight(this.canvasHeight),this.canvas.setWidth(this.canvasWidth),this.$store.getters.getCanvas&&(await this.loadCanvasToJSON(),this.targetColor=this.canvas.backgroundColor,this.canvas.renderAll()),this.$store.getters.getFrameType?(this.frameType=this.$store.getters.getFrameType,"snow"===this.frameType?(this.useSnowBackground=!0,await this.setSnowBackground()):"red"===this.frameType&&await this.setRedBackground()):("4x1"===this.frame||4===this.columns&&1===this.rows)&&this.useSnowBackground&&(this.frameType="snow",await this.setSnowBackground()),this.setMouseEvent(),this.setWorkMode()},loadCanvasToJSON(){return new Promise((t,e)=>{this.canvas.loadFromJSON(this.$store.getters.getCanvas,this.canvas.renderAll.bind(this.canvas)),t()})},setMouseEvent(){this.canvas.on("selection:created",t=>{t.selected.length>1&&this.canvas.discardActiveObject().renderAll()}).on("selection:cleared",t=>{this.saveWork(),this.canvas.discardActiveObject().renderAll()})},saveWork(){this.canvas.discardActiveObject().renderAll(),this.setWorkMode(),this.$store.commit("setCanvas",JSON.stringify(this.canvas.toObject(["id","borderColor","cornerColor","cornerSize","transparentCorners"]))),this.$store.commit("setFrameImg",this.canvas.toDataURL({format:"image/png"}))},setWorkMode(){this.canvas.discardActiveObject().renderAll(),this.$refs.pic.style["z-index"]=2,this.$refs.deco.style["z-index"]=1,this.$refs.deco.style["opacity"]=1},async selectFrameType(t){this.frameType=t,this.useSnowBackground="snow"===t,"snow"===t?await this.setSnowBackground():"red"===t?await this.setRedBackground():this.canvas.setBackgroundImage(null,()=>{this.canvas.backgroundColor="#FFF",this.targetColor="#FFF",this.canvas.renderAll()}),this.canvas.renderAll(),this.setWorkMode(),this.saveWork(),this.$store.commit("setFrameType",t)},getSnowImage(){return 2===this.columns&&2===this.rows?this.snowImage22:this.snowImage},getRedImage(){return 2===this.columns&&2===this.rows?this.redImage22:this.redImage},async setSnowBackground(){const t=this.getSnowImage();return new Promise((e,s)=>{Nt["fabric"].Image.fromURL(t,t=>{if(!t)return console.error("Snow background 이미지 로드 실패"),this.canvas.backgroundColor="#FFF",this.canvas.renderAll(),void e();const s=this.canvas.width,a=this.canvas.height,i=t.width,r=t.height,n=s/i,o=a/r,c=Math.max(n,o);t.scale(c),t.set({left:0,top:0,originX:"left",originY:"top"}),this.canvas.setBackgroundImage(t,()=>{this.canvas.renderAll(),e()})},{crossOrigin:"anonymous"})})},async setRedBackground(){const t=this.getRedImage();return new Promise((e,s)=>{Nt["fabric"].Image.fromURL(t,t=>{if(!t)return console.error("Red background 이미지 로드 실패"),this.canvas.backgroundColor="#FFF",this.canvas.renderAll(),void e();const s=this.canvas.width,a=this.canvas.height,i=t.width,r=t.height,n=s/i,o=a/r,c=Math.max(n,o);t.scale(c),t.set({left:0,top:0,originX:"left",originY:"top"}),this.canvas.setBackgroundImage(t,()=>{this.canvas.renderAll(),e()})},{crossOrigin:"anonymous"})})},selectBg(t){this.targetColor==t?(this.targetColor="#FFF",this.canvas.backgroundColor="#FFF"):(this.targetColor=t,this.targetPattern=null,this.canvas.backgroundColor=t),this.canvas.renderAll(),this.setWorkMode(),this.saveWork()},selectPattern(t){this.targetPattern==t?(this.canvas.backgroundColor="#FFF",this.targetColor="#FFF",this.targetPattern=null,this.setWorkMode(),this.saveWork()):(this.targetColor="#FFF",this.targetPattern=t,this.canvas.setBackgroundColor({source:this.$refs[this.targetPattern][0].src,repeat:"repeat"},()=>{this.canvas.renderAll(),this.setWorkMode(),this.saveWork()})),this.canvas.renderAll()},addMessage(){if(!this.messageText.trim())return;const t=this.canvas.getObjects().filter(t=>t.id&&t.id.includes("message"));t.forEach(t=>this.canvas.remove(t));const e=this.canvas.backgroundColor,s=this.getContrastColor(e),a=new Nt["fabric"].Textbox(this.messageText,{left:this.canvas.width/2,top:.95*this.canvas.height,width:this.canvas.width-40,fontSize:this.fontSize,textAlign:"center",originX:"center",originY:"center",fill:s,id:"message_"+Date.now()});this.canvas.add(a),this.canvas.renderAll(),this.saveWork()},getContrastColor(t){if(!t||"#FFF"===t||"#FFFFFF"===t||"white"===t||"transparent"===t)return"#000000";if("object"===typeof t&&t.source)return"#000000";if("string"===typeof t&&t.startsWith("#")){const e=t.replace("#","");let s,a,i;if(3===e.length)s=parseInt(e[0]+e[0],16),a=parseInt(e[1]+e[1],16),i=parseInt(e[2]+e[2],16);else{if(6!==e.length)return"#000000";s=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16)}const r=(.299*s+.587*a+.114*i)/255;return r>.5?"#000000":"#FFFFFF"}return"#000000"},async saveImage(){this.saveWork();try{const e=2,s=document.createElement("canvas");s.width=this.canvas.width*e,s.height=this.canvas.height*e;const a=s.getContext("2d");if("snow"===this.frameType||this.useSnowBackground||"red"===this.frameType){const e=this.canvas.backgroundImage;if(e&&e.getElement){const i=e.getElement();if(i)try{const t=e.scaleX||1,r=e.scaleY||1,n=e.width*t,o=e.height*r,c=s.width/this.canvas.width,l=s.height/this.canvas.height;a.drawImage(i,0,0,n*c,o*l)}catch(t){console.error("배경 이미지 그리기 오류:",t),a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height)}else a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height)}else{const e="snow"===this.frameType||this.useSnowBackground?this.getSnowImage():this.getRedImage(),i=new Image;i.crossOrigin="anonymous",await new Promise((r,n)=>{const o=setTimeout(()=>{console.error("배경 이미지 로드 타임아웃"),a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height),r()},1e4);i.onload=()=>{clearTimeout(o);try{const t=i.width/i.height,e=s.width/s.height;let r,n,o,c;t>e?(n=s.height,r=i.width*(n/i.height),o=(s.width-r)/2,c=0):(r=s.width,n=i.height*(r/i.width),o=0,c=(s.height-n)/2),a.drawImage(i,o,c,r,n)}catch(t){console.error("배경 이미지 그리기 오류:",t),a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height)}r()},i.onerror=t=>{clearTimeout(o),console.error("배경 이미지 로드 실패:",t),a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height),r()},i.src=e})}}else if(this.canvas.backgroundColor)if("string"===typeof this.canvas.backgroundColor)a.fillStyle=this.canvas.backgroundColor,a.fillRect(0,0,s.width,s.height);else if(this.canvas.backgroundColor&&this.canvas.backgroundColor.source){const e=new Image;e.crossOrigin="anonymous",await new Promise((i,r)=>{const n=setTimeout(()=>{console.error("배경 이미지 로드 타임아웃"),a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height),i()},1e4);e.onload=()=>{clearTimeout(n);try{const t=a.createPattern(e,"repeat");t?(a.fillStyle=t,a.fillRect(0,0,s.width,s.height)):(a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height))}catch(t){console.error("배경 그리기 오류:",t),a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height)}i()},e.onerror=t=>{clearTimeout(n),console.error("배경 이미지 로드 실패:",t),a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height),i()},e.src=this.canvas.backgroundColor.source})}else a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height);else a.fillStyle="#FFFFFF",a.fillRect(0,0,s.width,s.height);const i=this.$refs.pic;if(i){const s=i.querySelectorAll(".inner-frame");console.log("찾은 inner-frame 개수:",s.length);const r=this.$refs.canvasWrapper,n=(r&&r.getBoundingClientRect(),this.$refs.canvas.getBoundingClientRect());for(let i=0;i<s.length;i++){const r=s[i],o=r.querySelector("img");if(o&&o.src){console.log(`사진 ${i+1} 로딩 시작:`,o.src);const s=new Image;s.crossOrigin="anonymous",await new Promise((c,l)=>{const h=setTimeout(()=>{console.error("이미지 로드 타임아웃:",o.src),c()},5e3);s.onload=()=>{clearTimeout(h);try{const t=r.getBoundingClientRect(),o=(t.left-n.left)*e,c=(t.top-n.top)*e,l=t.width*e,h=t.height*e,g=s.width/s.height,d=t.width/t.height;let u=0,m=0,f=s.width,p=s.height;g>d?(p=s.height,f=s.height*d,u=(s.width-f)/2):(f=s.width,p=s.width/d,m=(s.height-p)/2),console.log(`사진 ${i+1} 그리기:`,{x:o,y:c,width:l,height:h,sourceX:u,sourceY:m,sourceWidth:f,sourceHeight:p,imgAspect:g,frameAspect:d,frameRect:{left:t.left,top:t.top,width:t.width,height:t.height},canvasRect:{left:n.left,top:n.top,width:n.width,height:n.height}}),l>0&&h>0&&!isNaN(o)&&!isNaN(c)?a.drawImage(s,u,m,f,p,o,c,l,h):console.warn(`사진 ${i+1} 위치/크기가 유효하지 않음:`,{x:o,y:c,width:l,height:h})}catch(t){console.error(`사진 ${i+1} 그리기 오류:`,t)}c()},s.onerror=t=>{clearTimeout(h),console.error("이미지 로드 실패:",o.src,t),c()},s.src=o.src})}else console.warn(`사진 ${i+1}을 찾을 수 없습니다.`)}}const r=this.canvas.backgroundColor,n=this.canvas.backgroundImage;this.canvas.backgroundColor="transparent",this.canvas.setBackgroundImage(null,()=>{this.canvas.renderAll()}),await this.$nextTick();const o=this.canvas.toDataURL({format:"png",multiplier:e,backgroundColor:"transparent"});this.canvas.backgroundColor=r,n?this.canvas.setBackgroundImage(n,()=>{this.canvas.renderAll()}):this.canvas.renderAll();const c=new Image;await new Promise((t,e)=>{c.onload=()=>{a.drawImage(c,0,0,s.width,s.height),t()},c.onerror=e=>{console.error("Canvas 이미지 로드 실패:",e),t()},c.src=o}),s.toBlob(t=>{if(t){const e=URL.createObjectURL(t),s=document.createElement("a");s.download=`pickMem_${Date.now()}.png`,s.href=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)}else alert("이미지 저장에 실패했습니다.")},"image/png")}catch(t){console.error("이미지 저장 오류:",t),alert("이미지 저장 중 오류가 발생했습니다.")}},goHome(){this.$router.push("/")}},computed:{getContentHeight(){return window.screen.availHeight}}},Kt=Ht,qt=(s("c93d"),Object(l["a"])(Kt,Pt,Mt,!1,null,"22ac327b",null)),Vt=qt.exports,Gt=(s("db9b"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"step-five"},[e("div",{staticClass:"row m-0 p-0"},[e("div",{staticClass:"col-md-8 text-center"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col mb-3"},[e("button",{staticClass:"btn-custom",on:{click:function(e){t.isOpen=!0}}},[t._v("미리보기")])])]),e("div",{staticClass:"d-flex justify-content-center align-items-center",on:{drop:t.drop,dragover:function(t){t.preventDefault()}}},[parseInt(t.frame.split("x")[0])<=parseInt(t.frame.split("x")[1])?e("canvas",{ref:"canvas",staticClass:"decoImg-horizontal",attrs:{width:"600",height:"450"}}):e("canvas",{ref:"canvas",staticClass:"decoImg-vertical",attrs:{width:"450",height:"600"}})]),e("div",{staticClass:"row w-100 text-center"},[e("div",{staticClass:"col-3"}),e("div",{staticClass:"col-2"},[e("span",{on:{click:t.prevImg}},[e("i",{staticClass:"mdi mdi-chevron-left",staticStyle:{"font-size":"40px"}})])]),e("div",{staticClass:"col-2 d-flex justify-content-center align-items-center"},[e("span",{staticStyle:{"font-size":"25px"}},[t._v(t._s(t.currImg)+" / "+t._s(Object.keys(t.images).length))])]),e("div",{staticClass:"col-2"},[e("span",{on:{click:t.nextImg}},[e("i",{staticClass:"mdi mdi-chevron-right",staticStyle:{"font-size":"40px"}})])]),e("div",{staticClass:"col-3"})])]),e("div",{staticClass:"col-md-4"},[e("span",{staticClass:"p-2",class:{target:"filter"==t.isMode},on:{click:function(e){t.isDraw=!1,t.setDrawMode(),t.canvas.isDrawingMode=!1,t.isMode="filter"}}},[t._v("필터")]),t._v(" | "),e("span",{staticClass:"p-2",class:{target:"sticker"==t.isMode},on:{click:function(e){t.isDraw=!1,t.setDrawMode(),t.canvas.isDrawingMode=!1,t.isMode="sticker"}}},[t._v("스티커")]),t._v(" | "),e("span",{staticClass:"p-2",class:{target:"draw"==t.isMode},on:{click:function(e){t.isDraw=!0,t.setDrawMode(),t.canvas.isDrawingMode=!0,t.isMode="draw"}}},[t._v("그리기")]),e("hr"),e("div",{directives:[{name:"show",rawName:"v-show",value:"filter"==t.isMode,expression:"isMode=='filter'"}]},[t.images[t.currImg]?e("div",{staticClass:"row",staticStyle:{height:"600px","overflow-y":"auto"}},t._l(t.filters,(function(a,i){return e("div",{key:i,staticClass:"col-5 text-center mr-auto ml-auto mb-3 card",class:{target:t.targetFilter==i},on:{click:function(e){return t.selectFilter(i)}}},[e("canvas",{ref:i+"_canvas",refInFor:!0,staticClass:"pt-1 mb-2",attrs:{height:""+(parseInt(t.frame.split("x")[0])<=parseInt(t.frame.split("x")[1])?"75px":"100px"),width:""+(parseInt(t.frame.split("x")[0])<=parseInt(t.frame.split("x")[1])?"100px":"75px")}}),e("img",{ref:i+"_sample",refInFor:!0,class:""+(parseInt(t.frame.split("x")[0])<=parseInt(t.frame.split("x")[1])?"filterImg-horizontal":"filterImg-vertical"),staticStyle:{position:"absolute",visibility:"hidden"},attrs:{src:s("4fbd")}}),e("div",[t._v(t._s(i))])])})),0):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:"sticker"==t.isMode,expression:"isMode=='sticker'"}],staticStyle:{height:"600px","overflow-y":"auto"}},t._l(t.sticker,(function(a,i){return e("div",{key:i},[e("div",{staticClass:"mb-3"},[e("strong",[t._v(t._s(i)+" 테마")])]),e("div",{staticClass:"row m-0 p-0 mb-5"},t._l(a,(function(a,r){return e("div",{key:r,staticClass:"col-3 mb-3 text-center",class:{target:t.targetSticker==`${i}_${a}`},attrs:{id:`${i}_${a}`},on:{click:function(e){t.isSticker=!t.isSticker,t.selectSticker(`${i}_${a}`)}}},[e("img",{ref:`${i}_${a}`,refInFor:!0,staticClass:"sticker",attrs:{src:s("a1ca")(`./${i}_${a}.png`)}})])})),0)])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:"draw"==t.isMode,expression:"isMode=='draw'"}],staticStyle:{height:"600px","overflow-y":"auto"}},[t._m(0),e("div",{staticClass:"row mb-3 m-0 p-0"},t._l(["1","2","3","4","5"],(function(s,a){return e("div",{key:a,staticClass:"col-md-2 m-0 p-0 m-auto",class:{target:t.targetLineWidth==s},on:{click:function(e){t.targetLineWidth=s,t.lineWidth=t.widthSteps[a]}}},[e("div",{class:"ml-auto mr-auto circle circle-"+s})])})),0),t._m(1),e("div",{staticClass:"mb-5"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.lineColor,expression:"lineColor"}],attrs:{type:"color"},domProps:{value:t.lineColor},on:{input:function(e){e.target.composing||(t.lineColor=e.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("button",{staticClass:"btn-custom",on:{click:t.clearPath}},[t._v("처음으로")])])])])]),t.isOpen?e("preview-modal",{attrs:{columns:parseInt(t.frame.split("x")[0]),rows:parseInt(t.frame.split("x")[1])},on:{"on-close":function(e){t.isOpen=!1}}}):t._e()],1)}),Zt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("small",[t._v("굵 기")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("small",[t._v("색 상")])])}],te=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header",staticStyle:{"border-bottom":"1px solid lightgrey"}},[e("div",{staticClass:"row w-100 m-0 p-0"},[e("div",{staticClass:"col-2"}),e("div",{staticClass:"col-8 d-flex justify-content-center align-items-center"},[e("strong",[t._v("프레임 꾸미기 미리보기")])]),e("div",{staticClass:"col-2 text-right"},[e("a",{staticStyle:{color:"black"},attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("on-close")}}},[e("i",{staticClass:"mdi mdi-close"})])])])]),e("div",{staticClass:"modal-body d-flex justify-content-center"},[e("preview-frame",{attrs:{rows:t.rows,columns:t.columns}})],1),e("div",{staticClass:"modal-footer d-block"},[e("button",{staticClass:"btn-custom btn-block",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-close")}}},[e("i",{staticClass:"mdi mdi-check"}),t._v(" 확인 ")])])])])])])},ee=[],se=function(){var t=this,e=t._self._c;return e("div",{staticClass:"preview-frame"},[e("div",{ref:"frame",class:`outter-frame outter-frame-${t.columns}-${t.rows}`},t._l(t.rowCnt,(function(s,a){return e("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(s,i){return e("div",{key:i,class:`pl-0 pr-0 inner-frame inner-frame-${t.columns}-${t.rows}`},[e("div",{class:`inner-frame-${t.columns}-${t.rows}`},[t.images[a*t.colCnt.length+s]?e("div",{class:`inner-frame-${t.columns}-${t.rows}`},[e("img",{attrs:{src:t.images[a*t.colCnt.length+s],id:"canvas-"+(a*t.colCnt.length+s),draggable:"false"}})]):e("div",{class:`inner-frame-${t.columns}-${t.rows}`},[e("canvas",{attrs:{id:"canvas-"+(a*t.colCnt.length+s)}})])])])})),0)})),0)])},ae=[],ie={name:"previewFrame",props:{rows:{default:2,type:Number},columns:{default:1,type:Number}},data(){return{frameImg:null,rowCnt:[],colCnt:[],images:{}}},created(){},mounted(){this.$store.getters.getFrameImg&&(this.frameImg=this.$store.getters.getFrameImg,this.$refs.frame.style.backgroundImage=`url(${this.frameImg})`),this.images=this.$store.getters.getTargets;for(let t=1;t<=this.$props.rows;t++)this.rowCnt.push(t);for(let t=1;t<=this.$props.columns;t++)this.colCnt.push(t)}},re=ie,ne=(s("0f64"),Object(l["a"])(re,se,ae,!1,null,"4cfeb0b9",null)),oe=ne.exports,ce={name:"previewModal",components:{previewFrame:oe},props:{rows:{default:2,type:Number},columns:{default:1,type:Number}}},le=ce,he=(s("a47b"),Object(l["a"])(le,te,ee,!1,null,"01a4870c",null)),ge=he.exports,de={name:"stepFive",components:{previewModal:ge,previewFrame:oe},data(){return{filterCanvas:{},currImg:1,frame:null,rows:2,columns:1,images:{},isMode:"filter",isOpen:!1,isSticker:!1,targetFilter:"normal",targetSticker:null,targetLineWidth:"1",widthSteps:[7,10,13,16,19],sticker:{cute_handdrawn:[],cute_natural_doodle:[],flower_leaf:[]},filters:{normal:null,grayscale:null,invert:null,sepia:null,brownie:null,brightness:null,contrast:null,saturation:null,vibrance:null,vintage:null,pixelate:null,blur:null},filterVal:.5,isDraw:!1,lineColor:"#000",lineWidth:10,isErase:!1}},created(){this.frame=this.$store.getters.getFrame},mounted(){this.init(),window.addEventListener("keydown",this.setKeydownEvent)},beforeDestroy(){this.saveWork()},destroyed(){window.removeEventListener("keydown",this.setKeydownEvent)},methods:{async init(){this.images=this.$store.getters.getTargets,this.sticker.cute_handdrawn=Array.from({length:6},(t,e)=>e+1),this.sticker.cute_natural_doodle=Array.from({length:12},(t,e)=>e+1),this.sticker.flower_leaf=Array.from({length:38},(t,e)=>e+1),this.canvas=new Nt["fabric"].Canvas(this.$refs.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.strokeStyle="#FFF",await this.loadImgCanvas(),this.setFilterObj(),this.setMouseEvent(),this.previewFilter(),this.initFreeDrawBrush()},setFilterObj(){this.$set(this.filters,"normal",null),this.$set(this.filters,"grayscale",new Nt["fabric"].Image.filters.Grayscale({grayscale:.5})),this.$set(this.filters,"invert",new Nt["fabric"].Image.filters.Invert({invert:1})),this.$set(this.filters,"sepia",new Nt["fabric"].Image.filters.Sepia({sepia:.5})),this.$set(this.filters,"brownie",new Nt["fabric"].Image.filters.Brownie({brownie:.5})),this.$set(this.filters,"brightness",new Nt["fabric"].Image.filters.Brightness({brightness:.5})),this.$set(this.filters,"contrast",new Nt["fabric"].Image.filters.Contrast({contrast:.5})),this.$set(this.filters,"saturation",new Nt["fabric"].Image.filters.Saturation({saturation:.5})),this.$set(this.filters,"vibrance",new Nt["fabric"].Image.filters.Vibrance({vibrance:.5})),this.$set(this.filters,"vintage",new Nt["fabric"].Image.filters.Vintage({vintage:.5})),this.$set(this.filters,"pixelate",new Nt["fabric"].Image.filters.Pixelate({pixelate:.5})),this.$set(this.filters,"blur",new Nt["fabric"].Image.filters.Blur({blur:.1}))},saveWork(){this.canvas.discardActiveObject().renderAll(),this.$store.commit("setTarget",[this.currImg,this.canvas.toDataURL()]),this.$store.commit("setImgCanvas",[this.currImg,JSON.stringify(this.canvas.toObject(["id","borderColor","cornerColor","cornerSize","transparentCorners"]))])},setMouseEvent(){this.canvas.on("mouse:down",t=>{"path"==t.type&&this.canvas.discardActiveObject().renderAll(),this.isSticker&&this.createObj("sticker",t.pointer.x,t.pointer.y)}).on("mouse:up",t=>{this.isDraw?this.saveWork():t.target&&(t.target.opacity=1,this.canvas.renderAll())}).on("mouse:move",t=>{}).on("selection:created",t=>{t.selected.length>1&&this.canvas.discardActiveObject().renderAll(),"path"==t.selected[0].type&&this.canvas.discardActiveObject().renderAll()}).on("selection:cleared",t=>{this.saveWork(),this.canvas.discardActiveObject().renderAll()})},setKeydownEvent(t){const e=[" ","DELETE"];let s=t.key.toUpperCase();if(!e.includes(s))return!1;if("DELETE"==s){let t=this.canvas.getActiveObject();this.canvas.remove(t),this.canvas.renderAll(),this.saveWork()}},async prevImg(){1!=this.currImg&&(this.currImg-=1,await this.loadImgCanvas(),this.saveWork())},async nextImg(){this.currImg!=Object.keys(this.images).length&&(this.currImg+=1,await this.loadImgCanvas(),this.saveWork())},async loadImgCanvas(){if(this.$store.getters.getImgCanvas(this.currImg)){let t=this.$store.getters.getImgCanvas(this.currImg);await this.loadCanvasToJSON(t);let e=this.canvas.backgroundImage;e.filters.length?this.targetFilter=e.filters[0].type.toLowerCase():this.targetFilter="normal"}else{const t=await this.loadImgFromBase64(this.$store.getters.getTmpTarget(this.currImg));this.canvas.setBackgroundImage(t,this.canvas.renderAll.bind(this.canvas),{scaleX:this.canvas.width/t.width,scaleY:this.canvas.height/t.height}),this.targetFilter="normal",this.canvas.backgroundColor="#FFFFFF",this.canvas.renderAll(),this.$store.commit("setImgCanvas",[this.currImg,JSON.stringify(this.canvas.toObject(["id","borderColor","cornerColor","cornerSize","transparentCorners"]))])}this.saveWork()},loadCanvasToJSON(t){return new Promise((e,s)=>{this.canvas.loadFromJSON(t,()=>{this.canvas.renderAll.bind(this.canvas),e(!0)})})},loadImgFromBase64(t){return new Promise((e,s)=>{Nt["fabric"].Image.fromURL(t,t=>{e(t)})})},loadImgFromURL(t){return new Promise((e,s)=>{const a=document.createElement("canvas"),i=new Image;i.onload=()=>{a.height=i.height,a.width=i.width;const t=a.getContext("2d");t.drawImage(i,0,0);const s=a.toDataURL("image/png");e(s)},i.src=t})},createObj(t,e,s){if("sticker"==t){let t=new Nt["fabric"].Image(this.$refs[this.targetSticker][0],{left:e,top:s,borderColor:"red",cornerColor:"green",cornerSize:10,transparentCorners:!1});t.left=e-t.width/2,t.top=s-t.height/2,this.canvas.add(t),this.canvas.renderAll(),this.isSticker=!1}},createDragObj(t,e,s,a){"sticker"==t&&(Nt["fabric"].Image.fromURL(e,t=>{t.left=s-t.width/2,t.top=a-t.height/2,t.borderColor="red",t.cornerColor="green",t.cornerSize=10,t.transparentCorners=!1,this.canvas.add(t),this.canvas.renderAll(),this.saveWork()}),this.isSticker=!1,this.targetSticker=null)},selectSticker(t){this.targetSticker==t?this.targetSticker=null:this.targetSticker=t},previewFilter(){const t=Object.keys(this.$refs).filter(t=>t.includes("sample"));t.forEach(async t=>{const e=t.split("_")[0],s=e+"_canvas";this.filterCanvas[s]=new Nt["fabric"].Canvas(this.$refs[s][0]);const a=await this.loadImgFromURL(this.$refs[t][0].src),i=await this.loadImgFromBase64(a);i.filters=[this.filters[e]],i.applyFilters(),this.filterCanvas[s].setBackgroundImage(i,this.filterCanvas[s].renderAll.bind(this.filterCanvas[s]),{scaleX:this.filterCanvas[s].width/i.width,scaleY:this.filterCanvas[s].height/i.height})})},async selectFilter(t){if(this.targetFilter==t||"normal"==t){const t=await this.loadImgFromBase64(this.$store.getters.getTmpTarget(this.currImg));this.targetFilter="normal",this.canvas.setBackgroundImage(t,this.canvas.renderAll.bind(this.canvas),{scaleX:this.canvas.width/t.width,scaleY:this.canvas.height/t.height})}else{const e=await this.loadImgFromBase64(this.$store.getters.getTmpTarget(this.currImg));this.targetFilter=t,e.filters=[this.filters[this.targetFilter]],e.applyFilters(),this.canvas.setBackgroundImage(e,this.canvas.renderAll.bind(this.canvas),{scaleX:this.canvas.width/e.width,scaleY:this.canvas.height/e.height})}this.$store.commit("setImgCanvas",[this.currImg,JSON.stringify(this.canvas.toObject(["id","borderColor","cornerColor","cornerSize","transparentCorners"]))]),this.saveWork()},async initImg(t){this.$set(this.images,t,this.$store.getters.getTmpTarget(t)),this.canvas.getObjects().forEach(t=>{this.canvas.remove(t)});const e=await this.loadImgFromBase64(this.images[this.currImg]);this.canvas.setBackgroundImage(e,this.canvas.renderAll.bind(this.canvas),{scaleX:this.canvas.width/e.width,scaleY:this.canvas.height/e.height})},drop(t){const e=t.dataTransfer.getData("text/plain");this.createDragObj("sticker",e,t.offsetX,t.offsetY)},initFreeDrawBrush(){this.canvas.freeDrawingBrush.color=this.lineColor,this.canvas.freeDrawingBrush.width=this.lineWidth,this.canvas.freeDrawingBrush.globalCompositeOperation="source-over",this.canvas.renderAll()},setDrawMode(){this.canvas.renderAll()},eraseMode(){this.isErase=!this.isErase,this.canvas.freeDrawingBrush.fillStyle="rgba(0,0,0,0)",this.canvas.freeDrawingBrush.color="rgba(0,0,0,0)",this.canvas.freeDrawingBrush.globalCompositeOperation="destination-out",this.canvas.renderAll()},clearPath(){const t=this.canvas.getObjects().filter(t=>"path"==t.type);t.forEach(t=>{this.canvas.remove(t)}),this.saveWork()}},watch:{lineColor(t){this.lineColor=t,this.canvas.freeDrawingBrush.color=t},lineWidth(t){this.canvas.freeDrawingBrush.width=t}}},ue=de,me=(s("ac33"),Object(l["a"])(ue,Gt,Zt,!1,null,"26a5870c",null)),fe=me.exports,pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step-result"},[e("div",{staticClass:"text-center mb-3"},[e("button",{staticClass:"btn-custom mr-3",on:{click:t.saveResult}},[t._v("저 장 하 기")]),e("button",{staticClass:"btn-custom",on:{click:function(e){return t.$router.push("/")}}},[t._v("다 시 하 기")])]),e("div",{staticClass:"mb-5"},[e("div",{ref:"result",class:`m-auto outter-frame outter-frame-${t.columns}-${t.rows}`},[e("result-frame",{attrs:{rows:t.rows,columns:t.columns}})],1)])])},ve=[],we=function(){var t=this,e=t._self._c;return e("div",{class:`result-frame outter-frame-${t.columns}-${t.rows}`},[e("div",{ref:"frame",class:`outter-frame outter-frame-${t.columns}-${t.rows}`},t._l(t.rowCnt,(function(s,a){return e("div",{key:a,class:"row p-0 m-0"},t._l(t.colCnt,(function(s,i){return e("div",{key:i,class:`pl-0 pr-0 inner-frame inner-frame-${t.columns}-${t.rows}`},[e("div",{class:`inner-frame-${t.columns}-${t.rows}`},[e("div",{class:`inner-frame-${t.columns}-${t.rows}`},[e("img",{attrs:{src:t.images[a*t.colCnt.length+s],id:"canvas-"+(a*t.colCnt.length+s),draggable:"false"}})])])])})),0)})),0)])},Ce=[],be={name:"resultFrame",props:{rows:{default:2,type:Number},columns:{default:1,type:Number}},data(){return{frameImg:null,canvas:null,rowCnt:[],colCnt:[],images:{}}},created(){},mounted(){this.$store.getters.getFrameImg&&(this.frameImg=this.$store.getters.getFrameImg,this.$refs.frame.style.backgroundImage=`url(${this.frameImg})`),this.images=this.$store.getters.getTargets;for(let t=1;t<=this.$props.rows;t++)this.rowCnt.push(t);for(let t=1;t<=this.$props.columns;t++)this.colCnt.push(t)},methods:{}},_e=be,ye=(s("da3f"),Object(l["a"])(_e,we,Ce,!1,null,"219ee745",null)),ke=ye.exports,Ie={name:"step-result",components:{resultFrame:ke},data(){return{rows:2,columns:1}},created(){let t=this.$store.getters.getTable;this.rows=t.rows,this.columns=t.columns},methods:{async saveResult(){let t=await Et()(this.$refs.result);t.style.backgroundColor="#FFF";let e=document.createElement("a");e.href=t.toDataURL(),e.download="Image.png",e.click()}}},xe=Ie,Fe=(s("e478"),Object(l["a"])(xe,pe,ve,!1,null,"2c6ec2d5",null)),Te=Fe.exports,Se={name:"PickMem",components:{navBar:j,footerBar:R,stepOne:q,stepOnePointFive:st,stepTwo:yt,stepThree:Bt,stepFour:Vt,stepFive:fe,stepResult:Te},data(){return{step:0,msg:["액자를 골라보세요!","가장 멋있고 예쁘게 찍어보세요","어렵겠지만 몇 개만 골라주세요","마음가는 대로 액자를 꾸며봐요!","이번에는 사진을 꾸며볼까요","마음에 드시나요?"]}},methods:{nextStep(){let t=this.$store.getters.getNext;0!=this.step||t?1!=this.step||t?2!=this.step||t?5!=this.step&&t&&(1==this.step&&Object.keys(this.$store.getters.getImages).length<6||(this.step+=1)):this.$Utils.toast("사진을 모두 골라주세요."):this.$Utils.toast("사진이 부족합니다."):this.$Utils.toast("액자를 골라주세요.")},previousStep(){0==this.step&&this.$router.push("/"),.5!=this.step?this.step-=1:this.step=0},goToCharacterSelection(){this.step=.5},goToPhotoStep(){this.step=1}}},$e=Se,Ae=(s("85b4"),Object(l["a"])($e,x,F,!1,null,null,null)),Oe=Ae.exports;a["a"].use(d["a"]);const je=[{path:"/",name:"Home",component:I},{path:"/pickMem",name:"PickMem",component:Oe,beforeEnter:(t,e,s)=>{console.log(t,e,"to, from"),s()}}],Le=new d["a"]({mode:"hash",base:"",routes:je});var Be=Le,Pe=s("2f62");a["a"].use(Pe["a"]);const Me=()=>({canNext:!1,rows:2,columns:1,frameCanvas:null,frameImg:null,frame:null,frameType:"default",imgCanvas:{},images:{},selectTarget:{},selectList:{},tmpTarget:{},orderQueue:[],selectedCharacters:[],selectedCharacter:null}),Ne=Me();var Re=new Pe["a"].Store({state:Ne,mutations:{setNext(t,e){t.canNext=e},setImages(t,e){t.images=e},setImgCanvas(t,e){a["a"].set(t.imgCanvas,e[0],e[1])},setTarget(t,e){a["a"].set(t.selectTarget,e[0],e[1])},setTargetList(t,e){t.selectList=e},setTargetListRemove(t,e){console.log(t.selectList,"store select list"),a["a"].delete(t.selectList,e)},setTmpTarget(t,e){a["a"].set(t.tmpTarget,e[0],e[1])},setTargets(t,e){t.selectTarget=e},setTmpTargets(t,e){t.tmpTarget=e},setRemoveQueue(t,e){t.orderQueue.push(e)},setUpdateQueue(t,e){t.orderQueue=e},setFrame(t,e){t.frame=e},setFrameType(t,e){t.frameType=e},setCanvas(t,e){t.frameCanvas=e},setFrameImg(t,e){t.frameImg=e},setTable(t,e){t.rows=e.rows,t.columns=e.columns},setSelectedCharacters(t,e){t.selectedCharacters=e},setSelectedCharacter(t,e){t.selectedCharacter=e},resetState(t){Object.assign(t,Me())}},getters:{getNext(t){return t.canNext},getImages(t){return t.images},getTargets(t){return t.selectTarget},getRemoveQueues(t){return t.orderQueue},getRemoveQueueCnt(t){return t.orderQueue.length},getFrame(t){return t.frame},getFrameType(t){return t.frameType},getCanvas(t){return t.frameCanvas},getFrameImg(t){return t.frameImg},getTable(t){return{rows:t.rows,columns:t.columns}},getTmpTargets(t){return t.tmpTarget},getTargetList(t){return t.selectList},getTmpTarget:t=>e=>t.tmpTarget[e],getImgCanvas:t=>e=>t.imgCanvas[e],getSelectedCharacters(t){return t.selectedCharacters},getSelectedCharacter(t){return t.selectedCharacter}},actions:{},modules:{}}),Ee=s("a65d"),De=s.n(Ee);function We(t){a["a"].toasted.clear(),a["a"].toasted.show(t,{theme:"bubble",position:"bottom-center",duration:3e3,type:"error",singleton:!0})}a["a"].use(De.a);var Ue={toast:We},Ye={install(t){t.prototype.$Utils=Ue}},ze=s("58ca");s("df25"),s("022c");a["a"].config.productionTip=!1,a["a"].use(Ye),a["a"].use(ze["a"],{refreshOnceOnNavigation:!0}),new a["a"]({router:Be,store:Re,render:t=>t(g)}).$mount("#app")},5831:function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_9.14bc72e0.png"},"5c83":function(t,e,s){},"5d5a":function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_4.750fa01d.png"},"678e":function(t,e,s){"use strict";s("265c")},"6cad":function(t,e,s){"use strict";s("7b06")},"6d6a":function(t,e,s){"use strict";s("fcd6")},7139:function(t,e,s){t.exports=s.p+"img/cute_handdrawn_3.142523a6.png"},7189:function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_6.bc1dd871.png"},"72af":function(t,e,s){t.exports=s.p+"img/flower_leaf_33.fc6c6866.png"},"768b":function(t,e,s){t.exports=s.p+"img/flower_leaf_25.786e5c17.png"},"798a":function(t,e,s){t.exports=s.p+"img/flower_leaf_30.014653cd.png"},"7b06":function(t,e,s){},"7cc8":function(t,e,s){},"7d2c":function(t,e,s){t.exports=s.p+"img/flower_leaf_35.0205f251.png"},"7e6c":function(t,e,s){"use strict";s("f22f")},"7e6e":function(t,e,s){},"82a1":function(t,e,s){"use strict";s("0bce")},"842a":function(t,e,s){t.exports=s.p+"img/cute_handdrawn_2.72cd5e73.png"},"85b4":function(t,e,s){"use strict";s("a73f")},8636:function(t,e,s){t.exports=s.p+"img/flower_leaf_31.835666a2.png"},"89af":function(t,e,s){t.exports=s.p+"img/flower_leaf_16.30297067.png"},"8cf6":function(t,e,s){t.exports=s.p+"img/2-2_jesus_1.c5cf9188.png"},"915f":function(t,e,s){t.exports=s.p+"img/flower_leaf_20.3518549c.png"},9209:function(t,e,s){t.exports=s.p+"img/2-2_bosco_1.ba1e2acd.png"},"98d6":function(t,e,s){t.exports=s.p+"img/flower_leaf_21.b507cdad.png"},"9ce4":function(t,e,s){},"9fda":function(t,e){t.exports="data:image/png;base64,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"},a19c:function(t,e,s){t.exports=s.p+"img/flower_leaf_27.53032e29.png"},a1ca:function(t,e,s){var a={"./cute_handdrawn_1.png":"1ad0","./cute_handdrawn_2.png":"842a","./cute_handdrawn_3.png":"7139","./cute_handdrawn_4.png":"f28a","./cute_handdrawn_5.png":"bd73","./cute_handdrawn_6.png":"a9c1","./cute_natural_doodle_1.png":"1b02","./cute_natural_doodle_10.png":"c555","./cute_natural_doodle_11.png":"3c9b","./cute_natural_doodle_12.png":"284c","./cute_natural_doodle_2.png":"a83d","./cute_natural_doodle_3.png":"cf9f","./cute_natural_doodle_4.png":"5d5a","./cute_natural_doodle_5.png":"37d4","./cute_natural_doodle_6.png":"7189","./cute_natural_doodle_7.png":"fcd9","./cute_natural_doodle_8.png":"cf39","./cute_natural_doodle_9.png":"5831","./flower_leaf_1.png":"229b","./flower_leaf_10.png":"487f","./flower_leaf_11.png":"effb","./flower_leaf_12.png":"245d","./flower_leaf_13.png":"4866","./flower_leaf_14.png":"11f7","./flower_leaf_15.png":"a2ba","./flower_leaf_16.png":"89af","./flower_leaf_17.png":"1526","./flower_leaf_18.png":"bfaa","./flower_leaf_19.png":"cf1d","./flower_leaf_2.png":"502b","./flower_leaf_20.png":"915f","./flower_leaf_21.png":"98d6","./flower_leaf_22.png":"42b6","./flower_leaf_23.png":"0989","./flower_leaf_24.png":"01b4","./flower_leaf_25.png":"768b","./flower_leaf_26.png":"ec60","./flower_leaf_27.png":"a19c","./flower_leaf_28.png":"cb4a","./flower_leaf_29.png":"2881","./flower_leaf_3.png":"9fda","./flower_leaf_30.png":"798a","./flower_leaf_31.png":"8636","./flower_leaf_32.png":"ab2b","./flower_leaf_33.png":"72af","./flower_leaf_34.png":"15e8","./flower_leaf_35.png":"7d2c","./flower_leaf_36.png":"f442","./flower_leaf_37.png":"f7b4","./flower_leaf_38.png":"eabe","./flower_leaf_4.png":"bfd0","./flower_leaf_5.png":"f7f87","./flower_leaf_6.png":"cce8","./flower_leaf_7.png":"3cb6","./flower_leaf_8.png":"0bdc","./flower_leaf_9.png":"106e"};function i(t){var e=r(t);return s(e)}function r(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id="a1ca"},a2ba:function(t,e,s){t.exports=s.p+"img/flower_leaf_15.c03c93f7.png"},a47b:function(t,e,s){"use strict";s("f7f8")},a73f:function(t,e,s){},a7ab:function(t,e,s){"use strict";s("47a8")},a83d:function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_2.4743f591.png"},a9c1:function(t,e,s){t.exports=s.p+"img/cute_handdrawn_6.3d3c77f5.png"},aa0b:function(t,e,s){},ab2b:function(t,e,s){t.exports=s.p+"img/flower_leaf_32.35493daa.png"},ac33:function(t,e,s){"use strict";s("558a")},b372:function(t,e,s){"use strict";s("7cc8")},b435:function(t,e,s){},b926:function(t,e,s){t.exports=s.p+"img/snow.326239d9.png"},bb6f:function(t,e,s){"use strict";s("24d1")},bd73:function(t,e,s){t.exports=s.p+"img/cute_handdrawn_5.7bc95ac2.png"},bfaa:function(t,e,s){t.exports=s.p+"img/flower_leaf_18.dec69dfd.png"},bfd0:function(t,e,s){t.exports=s.p+"img/flower_leaf_4.edb35c5d.png"},c555:function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_10.8ab43700.png"},c93d:function(t,e,s){"use strict";s("e49f")},ca43:function(t,e,s){t.exports=s.p+"img/2-2_red.fd7678e5.png"},cb4a:function(t,e,s){t.exports=s.p+"img/flower_leaf_28.996a2cdd.png"},cb6b:function(t,e,s){t.exports=s.p+"img/1_4.3829b54c.png"},cce8:function(t,e){t.exports="data:image/png;base64,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"},cf1d:function(t,e,s){t.exports=s.p+"img/flower_leaf_19.31351c06.png"},cf39:function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_8.0a8262fe.png"},cf9f:function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_3.db1fc371.png"},d53a:function(t,e,s){"use strict";s("487d")},da3f:function(t,e,s){"use strict";s("b435")},df25:function(t,e,s){},e478:function(t,e,s){"use strict";s("491e")},e49f:function(t,e,s){},e9d7:function(t,e,s){t.exports=s.p+"img/2-2_jesus_2.61776ee1.png"},eabe:function(t,e,s){t.exports=s.p+"img/flower_leaf_38.0bd92bdf.png"},ec60:function(t,e,s){t.exports=s.p+"img/flower_leaf_26.40158c4b.png"},effb:function(t,e,s){t.exports=s.p+"img/flower_leaf_11.45c52a2e.png"},f22f:function(t,e,s){},f28a:function(t,e,s){t.exports=s.p+"img/cute_handdrawn_4.e5f92a34.png"},f442:function(t,e,s){t.exports=s.p+"img/flower_leaf_36.89e95c01.png"},f7b4:function(t,e,s){t.exports=s.p+"img/flower_leaf_37.a8ef6f94.png"},f7f8:function(t,e,s){},f7f87:function(t,e,s){t.exports=s.p+"img/flower_leaf_5.07fa9a8c.png"},f89e:function(t,e,s){"use strict";s("5c83")},fa8f:function(t,e,s){t.exports=s.p+"img/2-2_bosco_2.73491229.png"},fcd6:function(t,e,s){},fcd9:function(t,e,s){t.exports=s.p+"img/cute_natural_doodle_7.8cf71ea8.png"},fe76:function(t,e,s){t.exports=s.p+"img/bosco.86570581.png"}});
//# sourceMappingURL=app.1b4d39cf.js.map